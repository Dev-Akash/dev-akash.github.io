<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How to Listen Mouse Events in OpenCV - Akash Srivastava</title>
    <meta name="description"
        content="how to listen mouse events in openCV by Akash Srivastava. This post will be haveing a illustration of an app on how the mouse events work in opencv and will provide a light on callback function and the cv2.setMouseCallback() function">
    <meta name="keywords" content="OpenCV,
How To,
Installation,
Tutorial,Anaconda,
Python,
Dev akash,
akash srivastava,
read, 
read image,
cv2,
cv2.imread(),
cv2.waitKey(),
cv2.destroyAllWindows(), 
mouse event listen, 
how to draw a line, 
application using opencv,
mouse events in opencv, 
mouse listener in opencv, 
handeling mouse events in opencv, 
opencv mouse pointer, 
mouse coordinates in opencv,
opencv mouse events python,
opencv mouse events c++,
opencv mouse listener,
opencv highgui mouse events,
opencv mouse click events,
python opencv mouse events,
opencv mouse click event c++,
opencv mouse drag event,
opencv mouse event handler,
mouse events in opencv,
mouse events in opencv python,
mouse click events in opencv,
opencv mouse move event,
opencv mouse move,
opencv mouse event scroll,
opencv mouse wheel event">
    <meta name="author" content="Akash Srivastava">
   <!-- Custom CSS -->
	<link rel="stylesheet" type="text/css" href="theme.css">

	<!-- Bootstrap CSS -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

	<!-- Material Fonts -->
	<link rel="stylesheet"
		href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@48,400,0,0" />

	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-157256022-1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag() { dataLayer.push(arguments); }
		gtag('js', new Date());

		gtag('config', 'UA-157256022-1');
	</script>
</head>

<body class="site_background h-100">
    <img style="position: absolute; z-index: -1; width: 100%; height: 100vh; object-fit: cover; object-position: center;"
        src="https://images.pexels.com/photos/2387793/pexels-photo-2387793.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=2"
        alt="">

    <nav class="d-sm-flex text-center justify-content-between p-5">
        <strong>Dev Akash</strong>
        <ul class="d-flex mt-3 mt-md-0" style="list-style: none; padding: 0px;">
            <li role="button" class="me-3">
                <a href="../index.html#home" style="text-decoration: none; color: white;">Home</a>
            </li>
            <li role="button" class="me-3">
                <a href="../index.html#about" style="text-decoration: none; color: white;">About</a>
            </li>
            <li role="button" class="me-3">
                <a href="../index.html#skills" style="text-decoration: none; color: white;">Skills</a>
            </li>
            <li role="button" class="me-3">
                <a href="../index.html#portfolio" style="text-decoration: none; color: white;">Portfolio</a>
            </li>
            <li role="button" class="me-3">
                <a href="../index.html#blogs" style="text-decoration: none; color: white;">Blogs</a>
            </li>
        </ul>
    </nav>

    <section id="blogPost" class="glassCard p-3">
        <span class="fs-1" style="font-weight: 100;">How to Listen Mouse Events in OpenCV</span>
        <p class="d-block mt-3" style="font-weight: 100;">
            Welcome! In this post I am going to illustrate how to listen mouse events in OpenCV, in last
            post I have described <a style="text-decoration: none;"
                href="./how-to-convert-color-image-to-grayscale-in-opencv-with-python.html">how to
                convert
                color image to grayscale image in OpenCV using Python</a>, do read it if your are new to
            openCV and also if you like reading the post do checkout our all posts about opencv <a
                style="text-decoration: none;" href="../index.html#blogs">here</a>
            <br>
            So in this tutorial we will create a small application which will draw the path followed by
            the mouse
            pointer on the canvas. In order to do this we will divide the creation into two simple
            steps:<br>
        </p>
        <ul style="font-weight: 100;">
            <li>Writing the Callback Function</li>
            <li>Adding the Callback function to cv2.setMouseCallback() function</li>
        </ul>
        <p style="font-weight: 100;">
            Basically a Callback Function is a kind of normal function definition but is used to define the
            instructions to
            be executed during the happening of the event (i.e., the click or drag of the mouse), we will
            discuss in detail
            in the upcoming section and in the second section we will see how to add that Callback Function
            to the main
            program so that the active frame execute the Callback Function when event happens.
            <br>
            So with this let's step up towards our first step to create the application, that is building
            the Callback
            Function.
        </p>
        <span class="d-block fs-3" style="font-weight: 100;">Mouse Callback Function</span>
        <p style="font-weight: 100;">A callback function is the function which will get executed whenever the event
            happens,
            so basically the
            callback function have a same syntax definition wherever it is used but can differ in
            what it does as it
            totally depends on what instruction are written in it.
        </p>

        <div class="experienceCard p-3 border-start">
            <code>
                def draw(event,x,y,flags,param):<br>
                &emsp;if event == cv2.EVENT_MOUSEMOVE:<br>
                &emsp;&emsp;cv2.circle(img,(x,y),10,(255,0,0),-1)<br>
            </code>
        </div>
        <br>
        <p style="font-weight: 100;">
            So in the above code snippet we are declaring a Callback function having five parameters.
            The first parameter
            event holds the value of the type of event such as left button click, right button click,
            etc.
            The second and thrid parameter x, y are the coordinates of the pointer.
            <br><br>
            This is all which we need to create our logic and draw a dot on the canvas wherever our
            pointer is. So in the
            first line of the code we declare the function draw_circle() having the five paramters which
            are needed. In the second line of code we check for the type of event which is required to
            be handled, in our
            case we are handeling the left button click of the mouse to draw the circle and if the
            condition satisfies we
            will draw the circle using the cv2.circle() function. The circle woulde be drawn on
            img at x and y coordinates of 10 radius with blue color (BGR) and would be
            filled circle as we passed the thickness parameter to be -1.
        </p>
        

        <span class="d-block fs-3" style="font-weight: 100;">Adding CallBack to cv2.setMouseCallback() function</span>
        <p style="font-weight: 100;">
            Now as our callback function is ready to perform some action on listening the event
            we need to add it to the
            eventHandler in opencv using the cv2.setMouseCallback() function which will trigger
            the
            callback function for the particular window on which it is listening the event.
            <br><br>
            So firstly we have to create our canvas on which we would be drawing with mouse and
            then we would provide it
            a window with a name and finally add the callback function to that window. and in
            order to show the image
            and keep taking the input we will run the cv2.imshow() function in a continuous
            while loop.
        </p>
        <div class="experienceCard p-3 border-start">
            <code>
                img = np.zeros((512,512,3), np.uint8)<br>
                cv2.namedWindow('image')<br>
                cv2.setMouseCallback('image', draw)<br>
                <br>
                while(True):<br>
                &emsp;cv2.imshow('image', img)<br>
                &emsp;if cv2.waitKey(20) & 0xff == 27:<br>
                &emsp;&emsp;break<br><br>
                cv2.destroyAllWindows()
            </code>
        </div><br>
        <p style="font-weight: 100;">
            In the above code we firstly creating the img image which is a black canvas and then in
            second
            line we created a named window and on that named window in third line we added the
            callback function. Then in
            infinite while loop we are showing the image and the to break the while loop we added a
            condition to listen the
            keyboard presses and if the Escape button is pressed exit the loop and then execute the
            cv2.destroyAllWindows() function which will destroy all windows created by OpenCV.
        </p>
        <span class="d-block fs-3" style="font-weight: 100;">Combining the Whole Code</span>
        <div class="experienceCard p-3 border-start">
            <code>
                def draw(event,x,y,flags,param):<br>
                &emsp;if event == cv2.EVENT_MOUSEMOVE:<br>
                &emsp;&emsp;cv2.circle(img,(x,y),10,(255,0,0),-1)<br><br>

                img = np.zeros((512,512,3), np.uint8)<br>
                cv2.namedWindow('image')<br>
                cv2.setMouseCallback('image', draw)<br>
                <br>
                while(True):<br>
                &emsp;cv2.imshow('image', img)<br>
                &emsp;if cv2.waitKey(20) & 0xff == 27:<br>
                &emsp;&emsp;break<br><br>
                cv2.destroyAllWindows()
            </code>
        </div><br>
        <span class="d-block fs-3 mb-2" style="font-weight: 100;">Output</span>
        <video class="col-12 col-md-6" autoplay controls>
            <source src="../images/mouse_event.mp4" type="video/mp4">
            Your browser do not support video tag
        </video>
        <script src="../script.js"></script>
</body>

</html>